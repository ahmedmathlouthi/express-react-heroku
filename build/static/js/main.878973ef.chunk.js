(this["webpackJsonpts-redux"]=this["webpackJsonpts-redux"]||[]).push([[0],{220:function(e,t,a){e.exports=a(377)},376:function(e,t,a){},377:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(44),o=a.n(c),u=a(181),l=a(182),s=a(183),i=a(208),p=a(206),m=a(397),d=a(396),E=a(393),b=a(50),f=a(36),O=function(e){return e.products.cart.reduce((function(e,t){return e+t.quantity}),0)},v=a(20);function g(e,t){return{type:e,payload:t}}var h=function(){return localStorage.removeItem("token"),g("user/LOGOUT")},j={logoutAction:h},S=function(){return h(),r.a.createElement(b.a,{to:"/login"})},T=Object(v.b)((function(e){return{username:e.user.username,numberOfItems:O(e)}}),j)((function(e){e.logoutAction;var t=e.numberOfItems,a=e.username;return r.a.createElement(d.a,null,r.a.createElement(d.a.Menu,{position:"right"},r.a.createElement(d.a.Item,{name:"postList"},r.a.createElement(f.b,{to:"/postList"},"PostList ")),r.a.createElement(d.a.Item,{name:"shop"},r.a.createElement(f.b,{to:"/shop"},"Shop")),r.a.createElement(d.a.Item,{name:"cart"},r.a.createElement(f.b,{to:"/cart"},"Cart (",t,")")),null===a?r.a.createElement(d.a.Item,{name:"login"},r.a.createElement(f.b,{to:"/login"},"Login")):r.a.createElement(E.a,{item:!0,text:a},r.a.createElement(E.a.Menu,null,r.a.createElement(E.a.Item,{onClick:S},"Logout")))))})),y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{as:"h1"},"My Blog"),r.a.createElement(T,null))},_=a(389),x=a(394),R=a(30),k=a(49),P=[{id:1,name:"Cool Headphones",price:4999,img:"https://placeimg.com/640/480/tech/5"},{id:2,name:"Various Parts",price:1800,img:"https://placeimg.com/640/480/tech/10"},{id:3,name:"Skateboard",price:2999,img:"https://placeimg.com/640/480/animals/3"}],C=function(){return g("products/SET_PRODUCTS_REQUEST")},D=a(205),w=function(e){return"$".concat((e/100).toFixed(2))},I=a(37),A=a(395),G=a(391),L=a(388),U=a(379),N=a(51),q={addToCart:function(e,t){return g("products/ADD_TO_CART",{product:e,quantity:t})}},Q=Object(v.b)(null,q)((function(e){var t=e.addToCart,a=e.product,c=Object(n.useState)(1),o=Object(I.a)(c,2),u=o[0],l=o[1],s=Object(n.useState)(!1),i=Object(I.a)(s,2),p=i[0],m=i[1];return p?r.a.createElement(A.a,{color:"green"},"Added"," ",r.a.createElement("strong",null,u," ",a.name)," ","to your cart!"):r.a.createElement(G.a,null,r.a.createElement(G.a.Field,null,r.a.createElement(L.a,{type:"number",label:"Quantity",value:u,onChange:function(e){return l(Math.max(Number(e.target.value),1))},fluid:!0})),r.a.createElement(U.a,{onClick:function(e){e.preventDefault(),t(a,u),m(!0)}},r.a.createElement(N.a,{name:"plus cart"}),"Add to cart"))})),M=function(e){var t=e.product;return r.a.createElement(x.a,null,r.a.createElement(D.a,{src:t.img,wrapped:!0,ui:!1}),r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Header,null,t.name),r.a.createElement(x.a.Description,null,w(t.price))),r.a.createElement(x.a.Content,{extra:!0},r.a.createElement(Q,{product:t})))},F=Object(v.b)((function(e){return{products:e.products.products}}),(function(e){return Object(R.b)({requestProducts:C},e)}))((function(e){var t=e.requestProducts,a=e.products;return Object(n.useEffect)((function(){0===a.length&&t()}),[t,a]),r.a.createElement(_.a,null,r.a.createElement(m.a,{as:"h2"},"Shop"),r.a.createElement(x.a.Group,null,a.map((function(e){return r.a.createElement(M,{product:e})}))))})),B=a(26),H=a.n(B),V=a(202),J=a(21),z=a(101),W=function(e){return e.products.cart.reduce((function(t,a){var n=e.products.products.find((function(e){return e.id===a.id}));return t.push(Object(J.a)({},a,{},n)),t}),[])},X=Object(z.a)(W,(function(e){return e.reduce((function(e,t){return e+t.price*t.quantity}),0)})),K=a(392),Z=a(203),$=a.n(Z),Y=a(59),ee=a.n(Y),te=Object(v.b)((function(e){return{cartItems:W(e),totalPrice:X(e)}}))((function(e){var t=e.cartItems,a=e.totalPrice,n=function(){var e=Object(V.a)(H.a.mark((function e(a,n){var r,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.find((function(e){return e.id===n})),e.next=3,ee.a.post("http://localhost:4000/api/checkout",{token:a,product:r});case 3:c=e.sent,"success"===c.data.status?console.log("check email"):console.log("error");case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a.Group,{divided:!0},t.map((function(e){return r.a.createElement(K.a,{key:e.id},r.a.createElement(K.a.Image,{size:"tiny",src:e.img}),r.a.createElement(K.a.Content,null,r.a.createElement(K.a.Header,null,e.name),r.a.createElement(K.a.Meta,null,r.a.createElement("span",{className:"price"},w(e.price))),r.a.createElement(K.a.Description,null,"Quantity: ",e.quantity),r.a.createElement($.a,{stripeKey:"pk_test_b9WxNMjvj5p8SZLdxWmBGOjw00NJkBNjCv",token:function(t){return n(t,e.id)},billingAddress:!0,shippingAddress:!0,amount:e.price,name:e.name})))}))),r.a.createElement(m.a,{as:"h3"},"Total Price: ",w(a)))})),ae=function(){return r.a.createElement(_.a,null,r.a.createElement(m.a,{as:"h2"},"Cart"),r.a.createElement(te,null))},ne={loginRequest:function(e){return g("user/LOGIN_REQUEST",e)}},re=Object(v.b)((function(e){return{user:e.user}}),ne)((function(e){var t=e.loginRequest,a=e.user,c=Object(n.useState)(""),o=Object(I.a)(c,2),u=o[0],l=o[1],s=Object(n.useState)(""),i=Object(I.a)(s,2),p=i[0],d=i[1];a.username=u,a.password=p;return r.a.createElement(_.a,null,r.a.createElement(m.a,{as:"h2"},"Login"),r.a.createElement(G.a,null,r.a.createElement(G.a.Field,null,r.a.createElement(L.a,{label:"Username",value:u,onChange:function(e){return l(e.target.value)}}),r.a.createElement(L.a,{type:"password",label:"Password",value:p,onChange:function(e){return d(e.target.value)}})),r.a.createElement(U.a,{onClick:function(e){e.preventDefault(),t(a)}},"Login")))})),ce=function(){return g("posts/GET_POSTS_REQUEST")},oe=function(e){return g("posts/GET_POSTS",e)},ue=a(390),le=function(e){var t=e.post;return r.a.createElement(x.a,null,"video"==t.type&&r.a.createElement(ue.a,{active:!0,id:function(e){var t=e.split("v=")[1],a=t.indexOf("&");if(-1!=a)return t.substring(0,a)}(t.url),source:"youtube"}),r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Header,null,t.title),"text"==t.type&&r.a.createElement(x.a.Description,null,t.body)),r.a.createElement(x.a.Content,{extra:!0},r.a.createElement(U.a,null,r.a.createElement(f.b,{to:{pathname:"/".concat(t.id),state:{post:t}}},"Details"))))},se=Object(v.b)((function(e){return{posts:e.posts.posts}}),(function(e){return Object(R.b)({getPostsRequest:ce},e)}))((function(e){var t=e.getPostsRequest,a=e.posts,c=Object(n.useState)(!1),o=Object(I.a)(c,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){0==a.length&&t()}),[t,a]),u?r.a.createElement(b.a,{to:"/addPost"}):r.a.createElement(_.a,null,r.a.createElement(U.a,{onClick:function(e){return l(!0)}},r.a.createElement(N.a,{name:"plus"}),"Add Post"),r.a.createElement(m.a,{as:"h2"},"Posts"),r.a.createElement(x.a.Group,null,a.map((function(e){return r.a.createElement(le,{key:e.id,post:e})}))))})),ie=function(e){var t=function(e){var t=e.split("v=")[1],a=t.indexOf("&");if(-1!=a)return t.substring(0,a)},a=e.match.params.id,n=Object(z.a)((function(e){return e.posts.posts}),(function(e){return e.filter((function(e){return e.id==a}))})),c=Object(v.c)(n);return r.a.createElement(_.a,null,"Details:",c.map((function(e){return r.a.createElement(_.a,null,r.a.createElement("h2",null,e.title),"video"==e.type&&r.a.createElement(ue.a,{active:!0,id:t(e.url),source:"youtube"}))})))},pe=a(100),me=a(398),de=a(387),Ee={addPostRequest:function(e){return g("posts/ADD_POST_REQUEST",e)}},be=Object(v.b)(null,Ee)((function(e){var t=e.addPostRequest,a={id:"",url:"",type:"",body:"",title:""},c=Object(n.useState)({video:!1,title:"",url:"",body:""}),o=Object(I.a)(c,2),u=o[0],l=o[1],s=Object(n.useState)(!1),i=Object(I.a)(s,2),p=i[0],m=i[1],d=u.video,E=u.title,b=u.url,f=u.body,O=function(e){e.persist();var t=e.currentTarget,a=t.value,n=t.name;-1!=t.className.indexOf("checkbox")?l((function(e){return Object(J.a)({},e,{video:!e.video})})):l((function(e){return Object(J.a)({},e,Object(pe.a)({},n,a))}))};return p?r.a.createElement(A.a,{color:"green"},"Post Added !"):r.a.createElement(G.a,null,r.a.createElement(G.a.Field,null,r.a.createElement(me.a,{compact:!0},r.a.createElement(de.a,{toggle:!0,label:"Video type",name:"video",checked:d,onChange:O})),r.a.createElement(L.a,{type:"text",name:"title",label:"Title",value:E,onChange:O,fluid:!0}),d?r.a.createElement(L.a,{type:"text",name:"url",label:"Video Url",value:b,onChange:O,fluid:!0}):r.a.createElement(L.a,{type:"text",name:"body",label:"Text content",value:f,onChange:O,fluid:!0})),r.a.createElement(U.a,{onClick:function(e){e.preventDefault(),a.title=E,a.body=f,a.url=b,a.type=d?"video":"text",t(a),m(!0)}},r.a.createElement(N.a,{name:"plus"}),"Add Post"))}));function fe(e){var t,a,n=e.displayName||e.name||"Component";return a=t=function(t){Object(i.a)(n,t);var a=Object(p.a)(n);function n(){return Object(l.a)(this,n),a.apply(this,arguments)}return Object(s.a)(n,[{key:"renderPage",value:function(){return r.a.createElement(e,this.props)}},{key:"render",value:function(){return localStorage.getItem("token")?this.renderPage():r.a.createElement(b.a,{to:"/login"})}}]),n}(r.a.Component),t.displayName="Route(".concat(n,")"),a}var Oe=Object(v.b)()((function(e){return Object(u.a)(e),r.a.createElement(_.a,null,r.a.createElement(y,null),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/",exact:!0},"Home"),r.a.createElement(b.b,{path:"/login",component:re}),r.a.createElement(b.b,{path:"/postList",component:se}),r.a.createElement(b.b,{path:"/shop",component:F}),r.a.createElement(b.b,{path:"/cart",component:ae}),r.a.createElement(b.b,{exact:!0,path:"/addPost",component:fe(be)}),r.a.createElement(b.b,{path:"/:id",component:ie})))})),ve={username:"",password:"",token:localStorage.getItem("token"),error:null};var ge={products:Object(k.a)(P),loading:!1,cart:[]};var he={posts:[],loading:!1};var je=Object(R.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user/LOGIN_SUCESS":return Object(J.a)({},e,{token:t.payload.token});case"user/LOGIN_ERROR":return Object(J.a)({},e,{error:t.payload});case"user/LOGOUT":return Object(J.a)({},e);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"products/SET_PRODUCTS_REQUEST":return Object(J.a)({},e,{loading:!0});case"products/SET_PRODUCTS":return Object(J.a)({},e,{products:t.payload,loading:!1});case"products/ADD_TO_CART":return Object(J.a)({},e,{cart:[].concat(Object(k.a)(e.cart),[{id:t.payload.product.id,quantity:t.payload.quantity}]),loading:!1});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/GET_POST_DETAILS":return Object(J.a)({},e,{posts:e.posts.filter((function(e){return e.id==t.payload}))});case"posts/GET_POSTS":return Object(J.a)({},e,{posts:t.payload,loading:!0});case"posts/ADD_POST":return Object(J.a)({},e,{posts:[].concat(Object(k.a)(e.posts),[Object(J.a)({},t.payload)]),loading:!1});case"posts/GET_POSTS_ERROR":case"posts/ADD_POST_ERROR":return Object(J.a)({},e,{loading:!1});default:return e}}}),Se=(a(375),a(376),a(207)),Te=a(24),ye="http://localhost:4000/api",_e=localStorage.getItem("token"),xe={headers:{Authorization:"Bearer ".concat(_e)}},Re=function(e){return ee.a.post("".concat(ye,"/user/login"),e)},ke=function(e){return ee.a.post("".concat(ye,"/post/add"),e,xe)},Pe=function(){return ee.a.get("".concat(ye,"/post/all"),xe)},Ce=H.a.mark(Ae),De=H.a.mark(Ge),we=H.a.mark(Le),Ie=H.a.mark(Ue);function Ae(){var e,t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Te.b)(Pe);case 3:return e=a.sent,t=e.data,a.next=7,Object(Te.c)(oe(t));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(Te.c)(g("posts/GET_POSTS_ERROR"));case 13:case"end":return a.stop()}}),Ce,null,[[0,9]])}function Ge(e){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Te.b)(ke,e.payload);case 3:return t.next=5,Object(Te.c)(g("posts/ADD_POST",e.payload));case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(Te.c)(g("posts/ADD_POST_ERROR",t.t0));case 11:case"end":return t.stop()}}),De,null,[[0,7]])}function Le(e){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Te.c)(g("posts/GET_POST_DETAILS",e.id));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Te.c)(g("posts/GET_POST_DETAILS_ERROR",t.t0));case 9:case"end":return t.stop()}}),we,null,[[0,5]])}function Ue(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([Object(Te.d)("posts/GET_POSTS_REQUEST",Ae),Object(Te.e)("posts/ADD_POST_REQUEST",Ge),Object(Te.d)("posts/GET_POST_DETAILS_REQUEST",Le)]);case 2:case"end":return e.stop()}}),Ie)}var Ne=H.a.mark(Qe),qe=H.a.mark(Me);function Qe(e){var t,a,n;return H.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Te.b)(Re,t);case 4:return a=r.sent,n=a.data.token,localStorage.setItem("token",n),r.next=9,Object(Te.c)(g("user/LOGIN_SUCESS",t));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(Te.c)(g("user/LOGIN_ERROR","login error"));case 15:case"end":return r.stop()}}),Ne,null,[[1,11]])}function Me(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.e)("user/LOGIN_REQUEST",Qe);case 2:case"end":return e.stop()}}),qe)}var Fe=Object(Se.a)(),Be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,He=Object(R.e)(je,Be(Object(R.a)(Fe)));Fe.run(Ue),Fe.run(Me),o.a.render(r.a.createElement(v.a,{store:He},r.a.createElement(f.a,null,r.a.createElement(Oe,null))),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.878973ef.chunk.js.map